!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var n=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),i="ontouchstart"in window,a=i?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};const o={name:"vue-drawer-layout",props:{drawerWidth:{type:Number},drawableDistance:{type:Number},zIndex:{type:Number,default:818},contentDrawable:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},backdropOpacityRange:{type:Array,default:function(){return[0,.4]},validator:function(t){var n=e(t,2),i=n[0],a=n[1];return i<a&&i>=0&&a<=1}},enable:{type:Boolean,default:!0},animatable:{type:Boolean,default:!0},reverse:{type:Boolean,default:!1}},data:function(){return{width:this.drawerWidth,distance:this.drawableDistance,pos:0,visible:!1,moving:!1,willChange:!1}},methods:{toggle:function(t){void 0===t&&(t=!this.visible),this.visible=t,this.pos=t?this.width:0,this.moving=!0},handleMaskClick:function(){this.moving||this.$emit("mask-click")}},watch:{moving:function(){this.animatable||(this.moving=!1)},willChange:function(){this.animatable||(this.willChange=!1)}},computed:{animateStyle:function(){return{moving:this.moving,"will-change":this.willChange}},drawerStyle:function(){var e,n=this.zIndex,i=this.width,a=this.moveRate,o=this.pos,r=this.reverse;return t(e={zIndex:n,width:"".concat(i,"px")},r?"right":"left","-".concat(Math.ceil(i*a),"px")),t(e,"transform","translate3d(".concat(r?"-":"").concat(Math.ceil(o*a),"px,0,0)")),e},contentStyle:function(){var t=this.pos,e=this.reverse;return{transform:"translate3d(".concat(e?"-":"").concat(t,"px,0,0)")}},backdropOpacity:function(){var t=this.backdropOpacityRange,n=this.pos,i=this.width,a=e(t,2);return a[0]+a[1]*(n/i)||0},moveRate:function(){var t=this.width;return this.distance/t}},mounted:function(){var t=this,e=this.$el,o=.8*parseInt(window.getComputedStyle(this.$el.parentNode).width);this.width=this.width||o,this.distance=this.distance||o;var r,s,l,d,c,u,A,h,m,v,p=this.width,f=this.reverse,w=function(t){this.enable&&(this.willChange=!0,v=void 0,u=d=t.clientX||t.changedTouches[0].clientX,c=t.clientY||t.changedTouches[0].clientY,s=+new Date,m=this.pos,document.addEventListener(a.move,b,!(!i||!n)&&{passive:!0}),document.addEventListener(a.up,C,!(!i||!n)&&{passive:!0}),this.$emit("slide-start"))}.bind(this),b=function(t){r=s,s=+new Date,h=u,u=t.clientX||t.changedTouches[0].clientX,A=t.clientY||t.changedTouches[0].clientY,l=[1,-1][+f]*(u-h)/(s-r);var e=m+[1,-1][+f]*(u-d);e=Math.min(p,e),e=Math.max(0,e),void 0===v&&(v=Math.abs(u-d)/Math.abs(A-c)<Math.sqrt(3)),v||(i&&n||t.preventDefault(),this.pos=e,this.$emit("slide-move",e))}.bind(this),C=function(t){if(void 0!==v){if(!v){var e=this.pos;this.visible=l>0?(p-e)/l<500||e>3*p/5:!((0-e)/l<500||e<3*p/5),this.pos>0&&this.pos<p&&(this.moving=!0)}this.pos=this.visible?p:0}this.moving||(this.willChange=!1,this.$emit("slide-end",this.visible)),v=void 0,document.removeEventListener(a.move,b,!(!i||!n)&&{passive:!0}),document.removeEventListener(a.up,C,!(!i||!n)&&{passive:!0})}.bind(this);"transitionend webkitTransitionEnd msTransitionEnd otransitionend oTransitionEnd".split(" ").forEach(function(e){t.$el.addEventListener(e,function(){t.moving&&(t.moving=!1,t.willChange=!1,t.pos=t.visible?p:0,t.$emit("slide-end",t.visible))},!1)}),e.addEventListener(a.down,w,!(!i||!n)&&{passive:!0})}};var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer-layout"},[n("div",{staticClass:"drawer-wrap",class:t.animateStyle,style:t.drawerStyle},[t._t("drawer")],2),t._v(" "),n("div",{staticClass:"content-wrap",class:t.contentDrawable?t.animateStyle:{},style:t.contentDrawable?t.contentStyle:{}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.backdrop&&t.pos,expression:"backdrop && pos"}],staticClass:"drawer-mask",style:{opacity:t.backdropOpacity},on:{click:t.handleMaskClick}}),t._v(" "),t._t("content")],2)])};r._withStripped=!0;var s=function(t,e,n,i,a,o,r,s){const l=("function"==typeof n?n.options:n)||{};l.__file="/Users/leminhtri/projects/personal/vue-drawer-layout/src/DrawerLayout.vue",l.render||(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,a&&(l.functional=!0)),l._scopeId=i;{let t;if(e&&(t=function(t){e.call(this,r(t))}),void 0!==t)if(l.functional){const e=l.render;l.render=function(n,i){return t.call(i),e(n,i)}}else{const e=l.beforeCreate;l.beforeCreate=e?[].concat(e,t):[t]}}return l}({render:r,staticRenderFns:[]},function(t){t&&t("data-v-034b183a_0",{source:".drawer-layout[data-v-034b183a] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}\n.drawer-wrap[data-v-034b183a] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  transform: translateZ(0);\n}\n.content-wrap[data-v-034b183a] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  transform: translateZ(0);\n}\n.drawer-mask[data-v-034b183a] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: #000;\n  z-index: 818;\n}\n.moving[data-v-034b183a] {\n  transition: transform 0.3s ease;\n}\n.will-change[data-v-034b183a] {\n  will-change: transform;\n}\n",map:{version:3,sources:["/Users/leminhtri/projects/personal/vue-drawer-layout/src/DrawerLayout.vue","DrawerLayout.vue"],names:[],mappings:"AAwNA;EACA,mBAAA;EACA,OAAA;EACA,QAAA;EACA,UAAA;EACA,SAAA;EACA,iBAAA;CCvNC;ADyND;EACA,mBAAA;EACA,OAAA;EACA,UAAA;EACA,yBAAA;CCvNC;ADyND;EACA,mBAAA;EACA,OAAA;EACA,SAAA;EACA,UAAA;EACA,QAAA;EACA,iBAAA;EACA,yBAAA;CCvNC;ADyND;EACA,mBAAA;EACA,OAAA;EACA,SAAA;EACA,UAAA;EACA,QAAA;EACA,uBAAA;EACA,aAAA;CCvNC;ADyND;EACA,gCAAA;CCvNC;ADyND;EACA,uBAAA;CCvNC",file:"DrawerLayout.vue",sourcesContent:[null,".drawer-layout {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}\n.drawer-wrap {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  transform: translateZ(0);\n}\n.content-wrap {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  transform: translateZ(0);\n}\n.drawer-mask {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: #000;\n  z-index: 818;\n}\n.moving {\n  transition: transform 0.3s ease;\n}\n.will-change {\n  will-change: transform;\n}\n"]},media:void 0})},o,"data-v-034b183a",!1,0,function t(){const e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,a){if(document.querySelector('style[data-vue-ssr-id~="'+t+'"]'))return;const o=i?a.media||"default":t,r=n[o]||(n[o]={ids:[],parts:[],element:void 0});if(!r.ids.includes(t)){let n=a.source,s=r.ids.length;if(r.ids.push(t),i&&(r.element=r.element||document.querySelector("style[data-group="+o+"]")),!r.element){const t=r.element=document.createElement("style");t.type="text/css",a.media&&t.setAttribute("media",a.media),i&&(t.setAttribute("data-group",o),t.setAttribute("data-next-index","0")),e.appendChild(t)}if(i&&(s=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",s+1)),r.element.styleSheet)r.parts.push(n),r.element.styleSheet.cssText=r.parts.filter(Boolean).join("\n");else{const t=document.createTextNode(n),e=r.element.childNodes;e[s]&&r.element.removeChild(e[s]),e.length?r.element.insertBefore(t,e[s]):r.element.appendChild(t)}}}});module.exports={DrawerLayout:s,install:function t(e){t.installed||e.component(s.name,s)}},module.exports.default=module.exports});
